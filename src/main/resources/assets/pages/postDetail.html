<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Book Trader</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../css/w3.css">

    <!-- library -->
    <script src="../js/main.js"></script>
    <script src="../js/jquery.js"></script>

</head>
<body class="w3-light-grey">
<header>
    <ul class="w3-navbar w3-border w3-indigo w3-padding-4">
        <li><a class="w3-hover-indigo w3-text-white w3-hover-text-light-blue" href="/">BookTrader</a></li>
    </ul>
</header>
<br>
<br>
<div class="w3-row-padding">

    <div class="w3-half">
        <!-- img src="https://images-na.ssl-images-amazon.com/images/I/51QdG2avTDL._AC_UL320_SR246,320_.jpg" alt="imageofbook" class="w3-image w3-card-4" -->
        <h1 id="title"><!-- book title --></h1>
        <br>
        <table class="w3-table-all w3-hoverable" style="width:auto">
            <tr>
                <td>Author</td>
                <td id="author"><!-- author name --></td>
            </tr>
            <tr>
                <td>Price</td>
                <td id="price"><!-- $$$ --></td>
            </tr>
            <tr>
                <td>ISBN</td>
                <td id="isbn"><!-- ISBN code --></td>
            </tr>
        </table>
        <br>
        <p>
            &nbsp;&nbsp;&nbsp;Posted by <a id="seller" href="/" target="_blank"> [seller's username] </a>
        </p>
    </div>

    <div class="w3-half">
        <p>
            <button id="contact" class=" w3-margin-right w3-margin-top w3-btn w3-round w3-green" href="/contact">Contact seller</button>
        </p>
        <br>
        <h4> Description </h4>
        <p id="description">
            <!-- Description of the book (written by seller) -->
        </p>
    </div>
    <script>
        var idToLookFor = sessionStorage.getItem('book_id');
        $.get("/api/book/detail/" + idToLookFor, function(response) {
            if (response === 'FAIL') {
                alert("failed");
                return;
            }
            var book = JSON.parse(response);
            $('#title').html(book.title);
            $('#author').html(book.author);
            $('#price').html(book.price);
            $('#isbn').html(book.code);
            $('#description').html(book.description);
            $.get("/api/user/get_user/" + book.seller, function(response) {
                var user = JSON.parse(response);
                $('#seller').html(user.name);
            })
        });
    </script>
</div>
</body>
</html>